import{Z as G,m as W,T as j,E as J,u as K}from"./common-b2c1eae8.js";import{b as X}from"./question-861d2f38.js";import{u as Y}from"./question-28af3519.js";import{_ as ee,c as r,C as oe,t as te,D as le,d as f,o as k,e as U,n as g,h as a,i as s,g as v,l as u,G as ne,F as ae,p as se,q as re,y as w}from"./index-d58f2316.js";const de={class:"addQuestion"},ie={class:"addQuestion-title"},ue={class:"addQuestion-content"},ce={class:"addQuestion-bottom"},me={class:"dialogbutton"},pe={class:"dialog-footer"},fe={__name:"index",setup(ge){const F=Y();let _=F.category;_.length===0&&F.getQuestionType().then(e=>{_=e});const h=r(0),y=r(0),x=r(),S=r(),I=e=>{var o;(o=S.value)==null||o.setScrollTop(e)},$=({scrollTop:e})=>{y.value=e},E=e=>`${e} px`;G.registerModule(W);const T=r("default"),b=oe(),c=r("<p>hello</p>"),C=r("");te(()=>{var e,o;h.value=(o=(e=x.value)==null?void 0:e.box)==null?void 0:o.clientHeight,setTimeout(()=>{c.value='<h1 style="text-align: center;">我是问题标题内容哦</h1><hr/><p>我是你要输入的问题哦!同时我也支持markdown语法哦!</p><p style="text-align: left;">开始发出问题吧!!!!!!</p>'},1500)});const O={modalAppendToBody:!1},z={maxLength:3333,placeholder:"请输入内容...",MENU_CONF:{insertImage:{onInsertedImage(e){if(e==null)return;const{src:o,alt:t,url:n,href:p}=e;console.log("inserted image",o,t,n,p)}},editImage:{onUpdatedImage(e){if(e==null)return;const{src:o,alt:t,url:n}=e;console.log("updated image",o,t,n)}},uploadImage:{async customUpload(e,o){K(e).then(t=>{const{errno:n,data:p}=t;if(n!==0){alert("图片上传失败");return}const{alt:i,href:V,url:l}=p;C.value=C.value+l+",",o(l,i,V)}).catch(t=>{console.error(t)})},fieldName:"image",maxFileSize:1*1024*1024*10,maxNumberOfFiles:10,allowedFileTypes:["image/*"],meta:{},metaWithUrl:!1,withCredentials:!1,timeout:5*1e3,base64LimitSize:5*1024,onBeforeUpload(e){return console.log(e),e},onProgress(e){console.log("progress",e)},onSuccess(e,o){console.log(`${e.name} 上传成功`,o)},onFailed(e,o){console.log(`${e.name} 上传失败`,o)},onError(e,o,t){console.log(`${e.name} 上传出错`,o,t)}}}};le(()=>{const e=b.value;e!=null&&e.destroy()});const D=e=>{b.value=e},Q=e=>{var o,t;h.value=(t=(o=x.value)==null?void 0:o.box)==null?void 0:t.clientHeight},M=e=>{console.log("destroyed",e)},R=e=>{},L=e=>{},N=(e,o)=>{alert(`【自定义提示】${o} - ${e}`)},q=(e,o,t)=>{console.log("ClipboardEvent 粘贴事件对象",o);const n=o.clipboardData.getData("text/plain");e.insertText(n),t(!1)},A=e=>{alert("内容过多了哦")},m=r(!1),d=r(null);function H(){if(!d.value){alert("标签没选");return}m.value=!1;let e=c.value.match(/<h1.*?>(.*?)<\/h1>/)[1],o=c.value,t=[];t.push({id:d.value.id}),X(e,o,t,C.value).then(n=>{console.log(n)})}function P(e){console.log(e),d.value=e}return(e,o)=>{const t=f("el-text"),n=f("el-divider"),p=f("el-slider"),i=f("el-button"),V=f("el-dialog");return k(),U("div",de,[g("div",ie,[a(n,{"content-position":"center"},{default:s(()=>[a(t,{type:"info",size:"large"},{default:s(()=>[u("发布问题")]),_:1})]),_:1})]),g("div",ue,[a(v(ne),{style:{height:"calc(100%)","z-index":"100"},ref_key:"scrollbarRef",ref:S,always:"",onScroll:$},{default:s(()=>[a(v(j),{editor:v(b),defaultConfig:O,mode:T.value,style:{"border-bottom":"5px solid #F5F6F8"}},null,8,["editor","mode"]),a(v(J),{ref_key:"innerRef",ref:x,defaultConfig:z,mode:T.value,modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=l=>c.value=l),onOnCreated:D,onOnChange:Q,onOnDestroyed:M,onOnFocus:R,onOnBlur:L,onCustomAlert:N,onCustomPaste:q,onOnMaxLength:A},null,8,["mode","modelValue"])]),_:1},512)]),g("div",ce,[a(p,{modelValue:y.value,"onUpdate:modelValue":o[1]||(o[1]=l=>y.value=l),max:h.value,"format-tooltip":E,onInput:I,size:"large",style:{width:"30%"}},null,8,["modelValue","max"]),a(i,{type:"primary",onClick:o[2]||(o[2]=l=>m.value=!0),size:"large"},{default:s(()=>[u("点击发布新问题!")]),_:1})]),a(V,{modelValue:m.value,"onUpdate:modelValue":o[5]||(o[5]=l=>m.value=l),title:"选择问题类别",width:"50%","align-center":""},{footer:s(()=>[g("span",pe,[a(i,{onClick:o[4]||(o[4]=l=>m.value=!1)},{default:s(()=>[u("取消发布")]),_:1}),a(i,{type:"primary",onClick:H},{default:s(()=>[u(" 确定发布 ")]),_:1})])]),default:s(()=>[g("div",me,[(k(!0),U(ae,null,se(v(_),(l,Z)=>(k(),re(i,{modelValue:d.value,"onUpdate:modelValue":o[3]||(o[3]=B=>d.value=B),onClick:B=>P(l),key:Z,size:"small"},{default:s(()=>[u(w(l.type),1)]),_:2},1032,["modelValue","onClick"]))),128))]),a(t,null,{default:s(()=>[u("选中标签:"+w(d.value?d.value.type:"还没有选择问题标签呢!"),1)]),_:1})]),_:1},8,["modelValue"])])}}},xe=ee(fe,[["__scopeId","data-v-83d40db3"]]);export{xe as default};
