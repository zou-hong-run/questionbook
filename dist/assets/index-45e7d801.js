import{Z as j,m as J,T as K,E as X,u as Y}from"./common-1586b75d.js";import{b as ee}from"./question-21c0e3fa.js";import{u as oe}from"./question-f10488b8.js";import{_ as te,u as le,a as ae,c as i,C as ne,t as se,D as ie,d as h,o as F,e as U,n as f,h as n,i as s,g,l as c,G as re,F as ue,p as de,q as ce,y as $,x as v}from"./index-cc774a4a.js";const me={class:"addQuestion"},pe={class:"addQuestion-title"},he={class:"addQuestion-content"},fe={class:"addQuestion-bottom"},ge={class:"dialogbutton"},ve={class:"dialog-footer"},_e={__name:"index",setup(ye){le();const w=ae(),S=oe();let _=S.category;_.length===0&&S.getQuestionType().then(e=>{_=e});const y=i(0),x=i(0),b=i(),T=i(),E=e=>{var o;(o=T.value)==null||o.setScrollTop(e)},O=({scrollTop:e})=>{x.value=e},R=e=>`${e} px`;j.registerModule(J);const B=i("default"),C=ne(),m=i("<p>hello</p>"),V=i("");se(()=>{var e,o;y.value=(o=(e=b.value)==null?void 0:e.box)==null?void 0:o.clientHeight,setTimeout(()=>{m.value='<h1 style="text-align: center;">我是问题标题内容哦</h1><hr/><p>我是你要输入的问题哦!同时我也支持markdown语法哦!</p><p style="text-align: left;">开始发出问题吧!!!!!!</p>'},1500)});const z={modalAppendToBody:!1},D={maxLength:3333,placeholder:"请输入内容...",MENU_CONF:{insertImage:{onInsertedImage(e){if(e==null)return;const{src:o,alt:t,url:a,href:u}=e;console.log("inserted image",o,t,a,u)}},editImage:{onUpdatedImage(e){if(e==null)return;const{src:o,alt:t,url:a}=e;console.log("updated image",o,t,a)}},uploadImage:{async customUpload(e,o){Y(e).then(t=>{const{errno:a,data:u}=t;if(a!==0){alert("图片上传失败");return}const{alt:d,href:k,url:l}=u;V.value=V.value+l+",",o(l,d,k)}).catch(t=>{console.error(t)})},fieldName:"image",maxFileSize:1*1024*1024*10,maxNumberOfFiles:10,allowedFileTypes:["image/*"],meta:{},metaWithUrl:!1,withCredentials:!1,timeout:5*1e3,base64LimitSize:5*1024,onBeforeUpload(e){return console.log(e),e},onProgress(e){console.log("progress",e)},onSuccess(e,o){console.log(`${e.name} 上传成功`,o)},onFailed(e,o){console.log(`${e.name} 上传失败`,o)},onError(e,o,t){console.log(`${e.name} 上传出错`,o,t)}}}};ie(()=>{const e=C.value;e!=null&&e.destroy()});const Q=e=>{C.value=e},M=e=>{var o,t;y.value=(t=(o=b.value)==null?void 0:o.box)==null?void 0:t.clientHeight},N=e=>{console.log("destroyed",e)},q=e=>{},L=e=>{},A=(e,o)=>{alert(`【自定义提示】${o} - ${e}`)},H=(e,o,t)=>{console.log("ClipboardEvent 粘贴事件对象",o);const a=o.clipboardData.getData("text/plain");e.insertText(a),t(!1)},P=e=>{alert("内容过多了哦")},p=i(!1),r=i(null);function Z(){if(!r.value){alert("标签没选");return}p.value=!1;let e=m.value.match(/<h1.*?>(.*?)<\/h1>/)[1],o=m.value,t=[];t.push({id:r.value.id}),ee(e,o,t,V.value).then(a=>{v({title:"添加文章成功",position:"bottom-right",message:"ohohohohohohoh!!!!!!!!!",duration:2e3}),v({title:"添加文章成功",position:"top-right",message:"ohohohohohohoh!!!!!!!!!",duration:2e3}),v({title:"添加文章成功",position:"bottom-right",message:"ohohohohohohoh!!!!!!!!!",duration:2e3}),v({title:"添加文章成功",position:"bottom-left",message:"ohohohohohohoh!!!!!!!!!",duration:2e3}),v({title:"添加文章成功",position:"top-left",message:"ohohohohohohoh!!!!!!!!!",duration:2e3});let u=a.data;w.push(`/question/questionItem/${u}`)})}function G(e){console.log(e),r.value=e}return(e,o)=>{const t=h("el-text"),a=h("el-divider"),u=h("el-slider"),d=h("el-button"),k=h("el-dialog");return F(),U("div",me,[f("div",pe,[n(a,{"content-position":"center"},{default:s(()=>[n(t,{type:"info",size:"large"},{default:s(()=>[c("发布问题")]),_:1})]),_:1})]),f("div",he,[n(g(re),{style:{height:"calc(100%)","z-index":"100"},ref_key:"scrollbarRef",ref:T,always:"",onScroll:O},{default:s(()=>[n(g(K),{editor:g(C),defaultConfig:z,mode:B.value,style:{"border-bottom":"5px solid #F5F6F8"}},null,8,["editor","mode"]),n(g(X),{ref_key:"innerRef",ref:b,defaultConfig:D,mode:B.value,modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=l=>m.value=l),onOnCreated:Q,onOnChange:M,onOnDestroyed:N,onOnFocus:q,onOnBlur:L,onCustomAlert:A,onCustomPaste:H,onOnMaxLength:P},null,8,["mode","modelValue"])]),_:1},512)]),f("div",fe,[n(u,{modelValue:x.value,"onUpdate:modelValue":o[1]||(o[1]=l=>x.value=l),max:y.value,"format-tooltip":R,onInput:E,size:"large",style:{width:"30%"}},null,8,["modelValue","max"]),n(d,{type:"primary",onClick:o[2]||(o[2]=l=>p.value=!0),size:"large"},{default:s(()=>[c("点击发布新问题!")]),_:1})]),n(k,{modelValue:p.value,"onUpdate:modelValue":o[5]||(o[5]=l=>p.value=l),title:"选择问题类别",width:"50%","align-center":""},{footer:s(()=>[f("span",ve,[n(d,{onClick:o[4]||(o[4]=l=>p.value=!1)},{default:s(()=>[c("取消发布")]),_:1}),n(d,{type:"primary",onClick:Z},{default:s(()=>[c(" 确定发布 ")]),_:1})])]),default:s(()=>[f("div",ge,[(F(!0),U(ue,null,de(g(_),(l,W)=>(F(),ce(d,{modelValue:r.value,"onUpdate:modelValue":o[3]||(o[3]=I=>r.value=I),onClick:I=>G(l),key:W,size:"small"},{default:s(()=>[c($(l.type),1)]),_:2},1032,["modelValue","onClick"]))),128))]),n(t,null,{default:s(()=>[c("选中标签:"+$(r.value?r.value.type:"还没有选择问题标签呢!"),1)]),_:1})]),_:1},8,["modelValue"])])}}},ke=te(_e,[["__scopeId","data-v-d5493b7b"]]);export{ke as default};
