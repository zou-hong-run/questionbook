import{_ as J,b as K,a as X,u as j,c as _,E as G,t as O,J as W,d as m,o as v,e as b,h as o,i as s,n as l,K as Y,l as f,F as Z,p as ee,q as te,y as ne,A as oe,B as se,x as S}from"./index-6c2aad7d.js";import{d as ae,e as le,f as ie,l as ce,h as de}from"./question-2954dd2b.js";import{c as ue}from"./websocket-aa003679.js";const T=q=>(oe("data-v-c7d90ddd"),q=q(),se(),q),re={class:"questionItem"},me=["innerHTML"],_e={class:"questionItem-content"},fe=T(()=>l("div",{class:"questionItem-content-left-username"},"小草",-1)),pe={class:"questionItem-content-left-content"},he={key:0};const ge=T(()=>l("div",{class:"questionItem-content-right-username"},"小花",-1)),Ie={class:"questionItem-content-right-content"};const ve={key:1},qe=T(()=>l("img",{src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png",alt:"",srcset:""},null,-1)),ke=[qe],ye={class:"questionItem-bottom"},Ce={__name:"index",setup(q){const k=K(),B=X(),U=j();k.name;let y=k.id;const E=_();let c=U.params.id;c||alert("页面id不存在"),ae(c).then(e=>{E.value=e.data}).catch(e=>{G.confirm("该问题不存在,是否返回?").then(()=>{B.back(),done()}).catch(()=>{B.back()})});const L=(e,n,a)=>{var i;const d=h.value;if(e){const t=H.value.cloneNode(!0),u=t.querySelector(".questionItem-content-left-username"),r=t.querySelector(".questionItem-content-left-content");u.innerHTML=a,r.innerHTML=n,d.appendChild(t)}else if(C.value){const t=C.value.cloneNode(!0),u=t.querySelector(".questionItem-content-right-username"),r=t.querySelector(".questionItem-content-right-content");u.innerHTML=a,r.innerHTML=n,d.appendChild(t)}(i=M.value)==null||i.setScrollTop(h.value.scrollHeight)},P=()=>{le(c).then(e=>{e.data.reverse().forEach(n=>{n.userId===y?L(!0,n.data,n.user.name):L(!1,n.data,n.user.name)})})};O(()=>{P()});let R=ue(),D={data:{userId:y,toUserId:null,message:null,flag:"questionHome",questionId:c}};const w=e=>{if(console.log("message",e.data),e.data&&e.data.flag==="questionHomeMessage"){let a=e.data.userName,d=e.data.message;Y(()=>{L(!1,d,a)})}},F=()=>{window.open("https://43.138.10.99")};R.onsend(D,w);const p=_(""),h=_(),H=_(),C=_(),V=e=>{S({title:e+"成功",message:"你的"+e+"是对作者的最大的鼓励",position:"bottom-left",duration:2e3}),S({title:e+"成功",message:"你的收藏是对作者的最大的鼓励",position:"bottom-right",duration:2e3}),S({title:e+"成功",message:"你的收藏是对作者的最大的鼓励",position:"top-left",duration:2e3}),S({title:e+"成功",message:"你的收藏是对作者的最大的鼓励",position:"top-right",duration:2e3})},$=()=>{ie(c),V("收藏")},z=()=>{ce(c),V("点赞")},M=_(),Q=e=>{var i;if(!p.value){alert("不能发送为空的消息");return}const n=p.value,a=k.name,d=h.value;if(e){const t=H.value.cloneNode(!0),u=t.querySelector(".questionItem-content-left-username"),r=t.querySelector(".questionItem-content-left-content");u.innerHTML=a,r.innerHTML=n,d.appendChild(t),de(n,c).then(x=>{console.log(x.data,"添加评论成功");let N={data:{userName:k.name,userId:y,toUserId:null,message:n,flag:"questionHomeMessage",questionId:c}};R.onsend(N,null)})}else{const t=C.value.cloneNode(!0),u=t.querySelector(".questionItem-content-right-username"),r=t.querySelector(".questionItem-content-right-content");u.innerHTML=a,r.innerHTML=n,d.appendChild(t)}(i=M.value)==null||i.setScrollTop(h.value.scrollHeight),p.value=""};return W(()=>{let e={data:{userId:y,toUserId:null,message:null,flag:"questionRemoveHome",questionId:c}};R.onsend(e,w)}),(e,n)=>{const a=m("el-scrollbar"),d=m("CirclePlus"),i=m("el-icon"),t=m("el-button"),u=m("Service"),r=m("el-input"),x=m("Star"),N=m("Pointer");return v(),b("div",re,[o(a,{class:"questionItem-title"},{default:s(()=>{var g;return[l("div",{innerHTML:(g=E.value)==null?void 0:g.data},null,8,me)]}),_:1}),l("div",_e,[o(a,{height:"calc(100%)",ref_key:"scrollbarRef",ref:M},{default:s(()=>[l("div",{class:"questionItem-content-itemcontent animate__animated animate__shakeX",ref_key:"questionItemContentRef",ref:h},[l("div",{ref_key:"contentItemLeftRef",ref:H,class:"questionItem-content-left animate__animated animate__backInRight"},[fe,l("div",pe,[(v(),b("div",he,"我想问一下这分割函数都会给速度还是是任何上是如果是是如何二人输入和是问题怎么解决啊,我快要哭了"))])],512),l("div",{ref_key:"contentItemRightRef",ref:C,class:"questionItem-content-right animate__animated animate__backInLeft"},[ge,l("div",Ie,[(v(),b("div",ve,ke))])],512)],512)]),_:1},512)]),o(a,{style:{width:"100%",height:"50px"}},{default:s(()=>{var g;return[l("div",ye,[o(t,null,{default:s(()=>[o(i,null,{default:s(()=>[o(d)]),_:1})]),_:1}),o(t,{onClick:F},{default:s(()=>[o(i,null,{default:s(()=>[o(u)]),_:1}),f("音视频通话")]),_:1}),o(r,{modelValue:p.value,"onUpdate:modelValue":n[0]||(n[0]=I=>p.value=I),onChange:n[1]||(n[1]=I=>Q(!0)),autosize:{minRows:2,maxRows:4},type:"input",placeholder:"尽情讨论吧!"},null,8,["modelValue"]),o(t,{onClick:n[2]||(n[2]=I=>Q(!0))},{default:s(()=>[f("发送")]),_:1}),o(t,{onClick:$,type:"default"},{default:s(()=>[o(i,null,{default:s(()=>[o(x)]),_:1}),f("收藏")]),_:1}),o(t,{onClick:z,type:"default"},{default:s(()=>[o(i,null,{default:s(()=>[o(N)]),_:1}),f("点赞")]),_:1}),o(t,{text:"",type:"primary",disabled:""},{default:s(()=>[f("问题类型:")]),_:1}),(v(!0),b(Z,null,ee((g=E.value)==null?void 0:g.types,(I,A)=>(v(),te(t,{plain:"",type:"info",disabled:"",key:A},{default:s(()=>[f(ne(I.type),1)]),_:2},1024))),128))])]}),_:1})])}}},Le=J(Ce,[["__scopeId","data-v-c7d90ddd"]]);export{Le as default};
